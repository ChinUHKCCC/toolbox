<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>團體分享卡片（1–100）</title>
  <meta name="description" content="抽一張1至100號的團體分享問題卡，促進彼此認識與深度交流。" />
  <style>
    :root {
      --bg: #0b1220;
      --card: #121826;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --accent: #7c3aed;
      --accent-2: #22d3ee;
      --btn: #1f2937;
      --btn-hover: #374151;
      --ring: #22d3ee55;
    }
    * { box-sizing: border-box; }
    html, body {
      height: 100%;
      margin: 0;
      background:
        radial-gradient(1000px 600px at 10% -10%, #1e293b 0%, transparent 60%),
        radial-gradient(900px 500px at 90% 110%, #0b3b4c 0%, transparent 60%),
        linear-gradient(180deg, #0b1220 0%, #0b1220 100%);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC",
        "Microsoft JhengHei", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
    }
    .wrap {
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .app {
      width: 100%;
      max-width: 720px;
      display: grid;
      gap: 16px;
    }
    .title {
      text-align: center;
      line-height: 1.2;
    }
    .title h1 {
      margin: 0;
      font-size: clamp(22px, 5vw, 34px);
      font-weight: 800;
      letter-spacing: 0.4px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .title p {
      margin: 6px 0 0;
      color: var(--muted);
      font-size: clamp(13px, 2.5vw, 16px);
    }
    .card {
      background: linear-gradient(180deg, #0f172a, #0b1220);
      border: 1px solid #233045;
      border-radius: 18px;
      padding: clamp(18px, 4vw, 28px);
      position: relative;
      box-shadow:
        0 20px 50px rgba(0,0,0,0.5),
        inset 0 0 0 1px rgba(255,255,255,0.03);
      overflow: hidden;
    }
    .card::before {
      content: "";
      position: absolute;
      inset: -2px;
      background:
        radial-gradient(600px 200px at 10% 0%, rgba(124,58,237,0.12), transparent 60%),
        radial-gradient(600px 200px at 90% 100%, rgba(34,211,238,0.12), transparent 60%);
      pointer-events: none;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      border-radius: 9999px;
      font-size: 12px;
      color: #cbd5e1;
      background: rgba(148,163,184,0.08);
      border: 1px solid rgba(148,163,184,0.18);
      user-select: none;
    }
    .number {
      display: inline-grid;
      place-items: center;
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: linear-gradient(135deg, rgba(124,58,237,0.2), rgba(34,211,238,0.2));
      border: 1px solid rgba(124,58,237,0.35);
      font-weight: 700;
      color: #f1f5f9;
    }
    .question {
      margin: 14px 0 0;
      font-size: clamp(18px, 3.8vw, 24px);
      line-height: 1.5;
      letter-spacing: 0.2px;
    }
    .hint {
      margin-top: 12px;
      color: var(--muted);
      font-size: clamp(13px, 2.6vw, 14px);
    }
    .controls {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 16px;
    }
    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 440px) {
      .row { grid-template-columns: 1fr; }
    }
    button, select {
      appearance: none;
      border: 1px solid #273244;
      background: var(--btn);
      color: var(--text);
      padding: 12px 14px;
      border-radius: 12px;
      font-size: 15px;
      cursor: pointer;
      transition: 0.16s ease-in-out;
      outline: none;
    }
    button:hover { background: var(--btn-hover); }
    button:focus, select:focus { box-shadow: 0 0 0 4px var(--ring); }
    .primary {
      background: linear-gradient(90deg, #6d28d9, #22d3ee);
      border: none;
      color: #0b1220;
      font-weight: 800;
    }
    .primary:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
    }
    .footer {
      margin-top: 8px;
      text-align: center;
      color: var(--muted);
      font-size: 12px;
    }
    .stack {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }
    .ghost {
      position: absolute;
      inset: 12px;
      border-radius: 16px;
      border: 1px dashed rgba(148,163,184,0.18);
      transform: rotate(-2deg);
    }
    .ghost.g2 { inset: 20px; transform: rotate(3deg); opacity: 0.6; }
    .ghost.g3 { inset: 28px; transform: rotate(-4deg); opacity: 0.35; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="app" role="application" aria-label="團體分享卡片抽取器">
      <div class="title">
        <h1>團體分享卡片 1–100</h1>
        <p>按下抽卡，開始你們的對話。可選擇難度與是否重複出現。</p>
      </div>

      <div class="card" aria-live="polite" aria-atomic="true">
        <div class="stack" aria-hidden="true">
          <div class="ghost"></div>
          <div class="ghost g2"></div>
          <div class="ghost g3"></div>
        </div>

        <div class="badge">
          當前卡片
          <span class="number" id="cardNo">—</span>
        </div>
        <div class="question" id="questionText">準備好了就抽一張卡吧！</div>
        <div class="hint" id="questionHint">提示：可用鍵盤空白鍵抽卡。長按「抽卡」可快速連抽。</div>

        <div class="controls">
          <div class="row">
            <button class="primary" id="drawBtn" aria-label="抽一張新卡">抽卡</button>
            <button id="shuffleBtn" aria-label="打亂順序（重置不重複池）">重置／洗牌</button>
          </div>
          <div class="row">
            <label style="display:flex;align-items:center;gap:8px;">
              <span style="color:#94a3b8;font-size:14px;white-space:nowrap;">難度</span>
              <select id="levelSel" aria-label="選擇問題難度">
                <option value="all">全部</option>
                <option value="L1">L1 輕鬆暖身</option>
                <option value="L2">L2 深聊探索</option>
                <option value="L3">L3 親密真誠</option>
              </select>
            </label>
            <label style="display:flex;align-items:center;gap:8px;">
              <span style="color:#94a3b8;font-size:14px;white-space:nowrap;">允許重複</span>
              <select id="repeatSel" aria-label="是否允許重複抽到">
                <option value="no">否（不重複）</option>
                <option value="yes">是（可重複）</option>
              </select>
            </label>
          </div>
        </div>
      </div>

      <div class="footer">
        按「重置／洗牌」可重新建立不重複抽卡池。問題文字可在程式碼中「問題資料區」自行調整。
      </div>
    </div>
  </div>

  <script>
    // ===========================
    // 問題資料區（可自行修改）
    // 將問題文字替換為你的版本即可；不要更動每題的 id 與 level 結構。
    // level: "L1"（輕鬆）、"L2"（深入）、"L3"（親密）
    // ===========================
    const QUESTIONS = [
      // L1 輕鬆暖身（約 34 題）
      { id: 1, level: "L1", text: "今天讓你心情不錯的一件小事是什麼？" },
      { id: 2, level: "L1", text: "最近一次讓你會心一笑的瞬間是？" },
      { id: 3, level: "L1", text: "如果現在有一小時自由時間，你想做什麼？" },
      { id: 4, level: "L1", text: "本週你想感謝誰？為什麼？" },
      { id: 5, level: "L1", text: "說一件你的小確幸。" },
      { id: 6, level: "L1", text: "你最常用的舒壓方式是什麼？" },
      { id: 7, level: "L1", text: "近期看過、聽過的作品中，有哪個你想推薦？" },
      { id: 8, level: "L1", text: "童年記憶裡，讓你覺得溫暖的畫面是？" },
      { id: 9, level: "L1", text: "理想的一個休假日會怎麼度過？" },
      { id: 10, level: "L1", text: "你手機裡最常拍的主題是什麼？" },
      { id: 11, level: "L1", text: "說一個你最近學到的新知或技能。" },
      { id: 12, level: "L1", text: "你會用哪三個詞形容今天的自己？" },
      { id: 13, level: "L1", text: "你最喜歡的飲品是什麼？為什麼？" },
      { id: 14, level: "L1", text: "分享一首能立刻提振你精神的歌。" },
      { id: 15, level: "L1", text: "你現在最期待的事情是什麼？" },
      { id: 16, level: "L1", text: "如果可以養成一個小習慣，你會選什麼？" },
      { id: 17, level: "L1", text: "說一件你引以為傲的小成就。" },
      { id: 18, level: "L1", text: "最近一次與陌生人的善意互動是什麼？" },
      { id: 19, level: "L1", text: "你最喜歡的季節與原因？" },
      { id: 20, level: "L1", text: "描述一個你心中的理想工作環境。" },
      { id: 21, level: "L1", text: "你最常點的外送或餐廳餐點是？" },
      { id: 22, level: "L1", text: "你覺得別人常誤解你的哪一點？" },
      { id: 23, level: "L1", text: "近來讓你感到被支持的一刻是？" },
      { id: 24, level: "L1", text: "如果要選一項生活配件升級，你會選什麼？" },
      { id: 25, level: "L1", text: "你收藏過最奇妙或有趣的小物是？" },
      { id: 26, level: "L1", text: "形容一下你的理想早晨儀式。" },
      { id: 27, level: "L1", text: "你心中的完美點心時刻是怎樣的？" },
      { id: 28, level: "L1", text: "分享一個你很想去的地方，為什麼？" },
      { id: 29, level: "L1", text: "如果辦一場小型聚會，你會設定什麼主題？" },
      { id: 30, level: "L1", text: "你最近一次說“謝謝”是對誰？因什麼事？" },
      { id: 31, level: "L1", text: "哪句話曾讓你覺得被理解？" },
      { id: 32, level: "L1", text: "你會如何形容你目前的人生節奏？" },
      { id: 33, level: "L1", text: "最近一次讓你感到好奇的事情是？" },
      { id: 34, level: "L1", text: "如果送自己一個禮物，你會選什麼？" },

      // L2 深聊探索（約 33 題）
      { id: 35, level: "L2", text: "今年你最想專注改善的一個面向是？為什麼？" },
      { id: 36, level: "L2", text: "說一個你正在努力戒除或建立的習慣，進展如何？" },
      { id: 37, level: "L2", text: "最近一次讓你感到挫折的事，以及你怎麼面對？" },
      { id: 38, level: "L2", text: "有哪件事曾改變你看待世界的方式？" },
      { id: 39, level: "L2", text: "你做過哪個決定讓你至今仍感到驕傲？" },
      { id: 40, level: "L2", text: "描述一次你主動伸出援手的經驗，帶來什麼影響？" },
      { id: 41, level: "L2", text: "當你焦慮時，最有效的自我安撫方式是什麼？" },
      { id: 42, level: "L2", text: "你期待被如何回饋或肯定？什麼形式最有效？" },
      { id: 43, level: "L2", text: "分享一次你與人產生誤會並化解的經驗。" },
      { id: 44, level: "L2", text: "你現在最需要的支持是什麼？我們能怎麼幫忙？" },
      { id: 45, level: "L2", text: "你對『成功』的定義是什麼？是否改變過？" },
      { id: 46, level: "L2", text: "描述一段你刻意離開舒適圈的經歷。" },
      { id: 47, level: "L2", text: "你如何與壓力相處？有沒有一個有效流程？" },
      { id: 48, level: "L2", text: "你如何辨識自己需要休息的信號？" },
      { id: 49, level: "L2", text: "說一個你最近在學習放下的觀念或期望。" },
      { id: 50, level: "L2", text: "你如何與重要的人維持關係的溫度？" },
      { id: 51, level: "L2", text: "分享一次你被真誠觸動的時刻，為什麼？" },
      { id: 52, level: "L2", text: "你曾經忽略了什麼需求？現在會怎麼做不同？" },
      { id: 53, level: "L2", text: "你對『界線』的理解是什麼？什麼時候會調整？" },
      { id: 54, level: "L2", text: "你最想與過去的自己說的一句話是什麼？" },
      { id: 55, level: "L2", text: "描述一次你承認錯誤並修正的經驗。" },
      { id: 56, level: "L2", text: "現在對你最重要的價值觀是哪些？" },
      { id: 57, level: "L2", text: "你如何判斷要堅持還是轉向？" },
      { id: 58, level: "L2", text: "一次被拒絕或失敗帶給你的禮物是什麼？" },
      { id: 59, level: "L2", text: "你在團隊中最擅長帶來什麼貢獻？" },
      { id: 60, level: "L2", text: "你的注意力最容易被什麼分散？如何調整？" },
      { id: 61, level: "L2", text: "最近一次讓你感到成長的契機是什麼？" },
      { id: 62, level: "L2", text: "描述一位對你影響深遠的人，以及原因。" },
      { id: 63, level: "L2", text: "如果能給未來一年一個主題詞，你會選什麼？" },
      { id: 64, level: "L2", text: "你願意為哪件事承擔風險？為什麼？" },
      { id: 65, level: "L2", text: "你如何看待『比較』？對你有何影響與學習？" },
      { id: 66, level: "L2", text: "說一件你以前害怕、如今比較能面對的事。" },
      { id: 67, level: "L2", text: "你如何界定『真誠』？何時最能做自己？" },

      // L3 親密真誠（約 33 題）
      { id: 68, level: "L3", text: "你最脆弱的時刻通常會怎麼求助或安放自己？" },
      { id: 69, level: "L3", text: "談一段你仍在療癒的故事，現階段有何體悟？" },
      { id: 70, level: "L3", text: "關係裡什麼行為會讓你覺得被珍惜？" },
      { id: 71, level: "L3", text: "描述一次你坦白說出真心話的經驗，結果如何？" },
      { id: 72, level: "L3", text: "你曾經為了守護什麼而說了不？後來怎麼看待？" },
      { id: 73, level: "L3", text: "當你感到孤單時，最想被怎樣陪伴？" },
      { id: 74, level: "L3", text: "你有哪些未說出口的需求或界線？" },
      { id: 75, level: "L3", text: "關於原生家庭，哪個模式至今仍影響你？" },
      { id: 76, level: "L3", text: "有什麼情緒是你較難表達的？原因可能是什麼？" },
      { id: 77, level: "L3", text: "你何時最能感到安全？哪些條件能幫上忙？" },
      { id: 78, level: "L3", text: "你如何與內在的自我批評對話？" },
      { id: 79, level: "L3", text: "分享一次你被深深理解或接住的經驗。" },
      { id: 80, level: "L3", text: "談談你對『原諒』的看法，有沒有界線？" },
      { id: 81, level: "L3", text: "如果可以重來，你會對某段關係做什麼不同？" },
      { id: 82, level: "L3", text: "你如何看見並回應別人的脆弱？" },
      { id: 83, level: "L3", text: "什麼時候你會選擇沉默？那代表了什麼？" },
      { id: 84, level: "L3", text: "說一件你正在學習接納的自己樣貌。" },
      { id: 85, level: "L3", text: "你最害怕被怎麼看待？這份恐懼從何而來？" },
      { id: 86, level: "L3", text: "描述一個你願意毫無保留信任的人，為何？" },
      { id: 87, level: "L3", text: "你目前在練習的愛的表達方式是什麼？" },
      { id: 88, level: "L3", text: "你如何與告別相處？曾學到哪些重要的道別？" },
      { id: 89, level: "L3", text: "有什麼你尚未說出口、但想被聽見的心聲？" },
      { id: 90, level: "L3", text: "你如何看見自己的需要與他人的需要之間的平衡？" },
      { id: 91, level: "L3", text: "分享一個你真心感到脆弱卻仍選擇前進的時刻。" },
      { id: 92, level: "L3", text: "你曾在哪個情境裡感到最被看見？" },
      { id: 93, level: "L3", text: "你如何看待道歉與修復？對你來說最困難的是什麼？" },
      { id: 94, level: "L3", text: "你有哪些自己也在摸索的需求，希望被如何對待？" },
      { id: 95, level: "L3", text: "如果要寫一封信給現在的自己，最想說什麼？" },
      { id: 96, level: "L3", text: "你最想被問但很少被問到的問題是什麼？" },
      { id: 97, level: "L3", text: "描述一次你真誠道謝或道歉的經驗，帶來什麼改變？" },
      { id: 98, level: "L3", text: "你如何與過去的遺憾共處？" },
      { id: 99, level: "L3", text: "你對親密的界線是什麼？如何溝通與維護？" },
      { id: 100, level: "L3", text: "如果把關係比喻成一座花園，你會如何照顧它？" },
    ];

    // ============ 程式邏輯 ============
    const cardNoEl = document.getElementById("cardNo");
    const questionEl = document.getElementById("questionText");
    const hintEl = document.getElementById("questionHint");
    const drawBtn = document.getElementById("drawBtn");
    const shuffleBtn = document.getElementById("shuffleBtn");
    const levelSel = document.getElementById("levelSel");
    const repeatSel = document.getElementById("repeatSel");

    let pool = [];
    let used = new Set();
    let isHolding = false;
    let holdTimer = null;

    function buildPool() {
      const level = levelSel.value;
      const list = QUESTIONS.filter(q => level === "all" ? true : q.level === level);
      pool = [...list];
      shuffle(pool);
      used.clear();
      updateHint();
    }

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function drawOne() {
      const allowRepeat = repeatSel.value === "yes";
      const level = levelSel.value;

      let candidates = QUESTIONS.filter(q => level === "all" ? true : q.level === level);

      if (!allowRepeat) {
        // 使用池避免重複
        if (pool.length === 0) {
          questionEl.textContent = "本輪已抽完！請按「重置／洗牌」或改為允許重複。";
          cardNoEl.textContent = "✓";
          return;
        }
        const q = pool.pop();
        used.add(q.id);
        show(q);
      } else {
        // 允許重複則直接亂數挑
        const q = candidates[Math.floor(Math.random() * candidates.length)];
        show(q);
      }
    }

    function show(q) {
      cardNoEl.textContent = q.id;
      questionEl.textContent = q.text;
      questionEl.setAttribute("data-level", q.level);
      questionEl.style.opacity = 0;
      requestAnimationFrame(() => {
        questionEl.style.transition = "opacity .2s ease-out, transform .2s ease-out";
        questionEl.style.transform = "translateY(4px)";
        requestAnimationFrame(() => {
          questionEl.style.opacity = 1;
          questionEl.style.transform = "translateY(0)";
        });
      });
      hintEl.textContent = levelLabel(q.level) + " · 若需要更多時間，可說「Pass」讓下一位回答。";
    }

    function levelLabel(lv) {
      switch (lv) {
        case "L1": return "L1 輕鬆暖身";
        case "L2": return "L2 深聊探索";
        case "L3": return "L3 親密真誠";
        default: return "全部";
      }
    }

    function updateHint() {
      const level = levelSel.value;
      const list = QUESTIONS.filter(q => level === "all" ? true : q.level === level);
      const remain = pool.length || list.length;
      hintEl.textContent = `目前篩選：${level === "all" ? "全部" : levelLabel(level)} · 問題數：${list.length} · 未抽：${pool.length || "—"}`;
    }

    // 事件綁定
    drawBtn.addEventListener("click", drawOne);
    shuffleBtn.addEventListener("click", () => { buildPool(); cardNoEl.textContent = "—"; questionEl.textContent = "已洗牌，按「抽卡」開始。"; });
    levelSel.addEventListener("change", buildPool);
    repeatSel.addEventListener("change", buildPool);

    // 空白鍵快捷鍵
    window.addEventListener("keydown", (e) => {
      if (e.code === "Space") {
        e.preventDefault();
        drawOne();
      }
    });

    // 長按快速連抽
    drawBtn.addEventListener("mousedown", () => {
      isHolding = true;
      clearTimeout(holdTimer);
      holdTimer = setTimeout(function loop() {
        if (!isHolding) return;
        drawOne();
        holdTimer = setTimeout(loop, 220);
      }, 420);
    });
    window.addEventListener("mouseup", () => { isHolding = false; clearTimeout(holdTimer); });
    window.addEventListener("mouseleave", () => { isHolding = false; clearTimeout(holdTimer); });
    drawBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      isHolding = true;
      clearTimeout(holdTimer);
      holdTimer = setTimeout(function loop() {
        if (!isHolding) return;
        drawOne();
        holdTimer = setTimeout(loop, 220);
      }, 420);
    }, { passive: false });
    window.addEventListener("touchend", () => { isHolding = false; clearTimeout(holdTimer); });

    // 初始化
    buildPool();
  </script>
</body>
</html>